{{- /* Chezmoi configuration template */ -}}
{{- /* Prompts user for personalization on first run */ -}}

{{- /* Profile selection - "personal" uses predefined values, "custom" prompts for all */ -}}
{{- $profile := promptChoiceOnce . "profile" "Select profile" (list "personal" "custom") -}}

{{- /* For custom profile, prompt for values */ -}}
{{- $username := "" -}}
{{- $email := "" -}}
{{- $signingkey := "" -}}

{{- if eq $profile "custom" -}}
{{-   $username = promptStringOnce . "github.username" "GitHub username" -}}
{{-   $email = promptStringOnce . "github.email" "Git email" -}}
{{-   $signingkey = promptStringOnce . "github.signingkey" "SSH signing key path (leave empty to disable signing)" -}}
{{- end -}}

{{- /* Secondary git identity (optional, any profile) - for work repos in ~/repos/sc/ */ -}}
{{- $scName := promptStringOnce . "github.sc.name" "Secondary git name for ~/repos/sc/ (leave empty to skip)" -}}
{{- $scEmail := "" -}}
{{- if $scName -}}
{{-   $scEmail = promptStringOnce . "github.sc.email" "Secondary git email for ~/repos/sc/" -}}
{{- end -}}

[data]
    profile = {{ $profile | quote }}
{{- if eq $profile "custom" }}
    [data.github]
        username = {{ $username | quote }}
        email = {{ $email | quote }}
{{- if $signingkey }}
        signingkey = {{ $signingkey | quote }}
{{- end }}
{{- end }}
{{- if and $scName $scEmail }}
    [data.github.sc]
        name = {{ $scName | quote }}
        email = {{ $scEmail | quote }}
{{- end }}
